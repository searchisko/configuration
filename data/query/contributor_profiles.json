{
  "id" : "contributor_profiles",
  "description" : "Query contributor profiles. Accepts the following parameters: 'query', 'contributor'.",
  "default" : {
    "sys_type" : "contributor_profile"
  },
  "override" : {
    "sys_content_type" : "source"
  },
  "template" : "{ {{#total}} \"size\":0, {{/total}} \n {{^total}} \"size\": 30,{{/total}} \n \"fields\": [ \"sys_contributors\", \"sys_title\", \"sys_url_view\" ],\"script_fields\": {\"accounts\": {\"script\": \"(_source.accounts && _source.accounts.length > 0 ) ? _source.accounts[0] : ''\" }},\"query\": {\"filtered\": { {{#contributor}} \"filter\": {\"terms\": {\"sys_contributors\": [ {{#contributor}} \"{{.}}\", {{/contributor}} {} ]}}, {{/contributor}} \"query\": { {{#query}} \"simple_query_string\": {\"fields\": [\"sys_contributors.fulltext\", \"sys_title\"],\"query\": \"{{query}}\", \"default_operator\": \"and\" } {{/query}} {{^query}} \"match_all\": {} {{/query}} }}}   {{#aggregate}},\"aggs\" : {\n              \"bucketed\" : {\n                \"date_histogram\" : {\n                  \"field\" : \"{{date_field}}{{^date_field}}sys_created{{/date_field}}\",\n                  \"interval\" : \"{{interval}}{{^interval}}month{{/interval}}\",\n                  \"pre_zone\" : \"{{timezone_offset}}{{^timezone_offset}}America/New_York{{/timezone_offset}}\"\n                }\n              }\n            }{{/aggregate}} }"
}
